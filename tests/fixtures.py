import secrets
import string
from pathlib import Path

import pytest


@pytest.fixture(scope="session")
def test_account_jwt():

    # TODO: env variable
    tmp_token = "eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IlNMdVluMm1jTDN5UXByWjRRQ0pMdiJ9.eyJnaXZlbl9uYW1lIjoiS2VubnkiLCJmYW1pbHlfbmFtZSI6IldvcmttYW4iLCJuaWNrbmFtZSI6Imtlbm55IiwibmFtZSI6Iktlbm55IFdvcmttYW4iLCJwaWN0dXJlIjoiaHR0cHM6Ly9saDMuZ29vZ2xldXNlcmNvbnRlbnQuY29tL2EtL0FPaDE0R2hTZzRpNjQyLTY5dVFGWHZVclFfTHZMRDBnMUc2TnRsNFVHT3pFUTFMM2VaVVFmeEdYQmNhZ1V0UXJ1YTNMTS0wTm1McDZCbnk1RUJobjJqR090YV9ibThVdWtObmJucnczR0xjMDluWXhxLTBwZVRsY25UdGR4NnlLMTBDSVdZRTkzZ0RiU0w1RnJNLU9TZGxzRVcwcVp2cFprbm9rTkt5ZWFXLU05WnlINHQ2WEkwckxodXFIYzR1Y2JSNFZHVE1jY2VfRnhHN1pDYVY5T1hUa0Izemo2MFMxUm9EOFg5VnRRZHlrUk93MWN1eWVyRXVSRVdZeVRqVWZGY05URjd3eEl2LWpCQTQ4LU5RZjJOYklwVWhYMFlJMTgyS1VEMnpZNHV2NXpBLTJ0VnFiYXJXSUIxUnlLN3Z2NjFjczE3dGdxb3Y2LXZFY3k4Qm9Zb0Y3dWszNjRCdkVoRHV1V0ZoaXZ6UEMxc1pMcnVsVWZLMl9IOGNQZS1oUGVZREVobE1BdXZPSXJuVnBTdURfNWxRZzJtLV9oc28yekxWaU1vTms5ZWpGdmZjZmIxZXM1WFVTU2FfZVR6S0FyZm5Lb3FzN2paY1ZNdVZOdWVMRHdWZWwzeno4Y1lvMXJDRjRsTmtRRWlMTE9zTE5mcWVtbnM1Y0pwRUVKUGd4Mnd6ZnRFcHJ3QWcybEN4YWVDTmQ4M21yNmVpVHVfNGs0VGFkOXVlRG1zN1Q2N1dNd3RhSlgzUDllNGdPRTRTcTRnanRuVlRlUVU5N3lxVWhmanp6V3p0Y1Z0Zy01R3BDbzVfZ3U5Q1ZIU05QbjQwbXZrNTloRTNnQ1ZEWllHZDN6dV9RZW1hVklkRUctcWJ0enhCa2otOGJZWHhQVUtvUmVycXRqcDhobHpOSEZhWWFzLTVpMFNud01ySGM2dV9JclFsb3AtY0k1a1ZBbFNhVUh6SkppN0VJbndxZlRUSDUxTzdOdy03RlRJTngybUdtWDB3Q1hvYVV0X3E4akdqRGZqM2tEREdiSWc9czk2LWMiLCJsb2NhbGUiOiJlbiIsInVwZGF0ZWRfYXQiOiIyMDIyLTAyLTI2VDIzOjEyOjE0LjQyOVoiLCJlbWFpbCI6Imtlbm55QGxhdGNoLmJpbyIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJpc3MiOiJodHRwczovL2xhdGNoYWkudXMuYXV0aDAuY29tLyIsInN1YiI6Imdvb2dsZS1vYXV0aDJ8MTA1MDg3OTM4NjkzMDUwODkxMDI0IiwiYXVkIjoianpGQk9oSWJmcDRFUFJZWjh3bXg0WXl2TDI3TEZEZUIiLCJpYXQiOjE2NDY1MTQ0MzQsImV4cCI6MTY0NjU1MDQzNH0.QyVlpTxWsN16gIeX1Phz0wkhbRIN8hg0NOxzRV5NkP1yg2jWoKCQEns4iLaxPcdNnfF-OFBOieoY-IiD4ngEbzzDKPFvyp5VcXzLaXt-KTefX8NZwbkUNZzyp-9ZMK28793TaKW7AHDgbkYry5hcr9xC9hKFYrnCWVoWixKxbQ9ampNwj-FLhGiv1ClgOri6HlSga0JTQrzyxipXuIaMPD8kMl5DXiyegahR5x0PUXJkujprUFQ4xkZAFiMwxC09zMxIFI1L0MCbPfkVVCg0OhpMRlj4Ok3LzXWr-FrAkrKtom3jYitu8B4sSCPtX3KOZMft9C4bxoBjXwbvqQsB2w"
    token_dir = Path.home().joinpath(".latch")
    token_dir.mkdir(exist_ok=True)
    token_file = token_dir.joinpath("token")
    with open(token_file, "w") as f:
        f.write(tmp_token)

    return tmp_token


@pytest.fixture(scope="session")
def project_name():
    alphabet = string.ascii_letters
    return "".join(secrets.choice(alphabet) for i in range(8)).lower()
