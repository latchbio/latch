import secrets
import string
from pathlib import Path

import pytest


@pytest.fixture(scope="session")
def test_account_jwt():

    # TODO: env variable
    tmp_token = "eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IlNMdVluMm1jTDN5UXByWjRRQ0pMdiJ9.eyJnaXZlbl9uYW1lIjoiS2VubnkiLCJmYW1pbHlfbmFtZSI6IldvcmttYW4iLCJuaWNrbmFtZSI6Imtlbm55IiwibmFtZSI6Iktlbm55IFdvcmttYW4iLCJwaWN0dXJlIjoiaHR0cHM6Ly9saDMuZ29vZ2xldXNlcmNvbnRlbnQuY29tL2EtL0FPaDE0R2hCOGNKR2Q1RklXUHVPWmUtYlN2QnZ2WDE5MkFFRC1GV3UwendocGdNOTl5RHEzcXF4LUZOMmJWS1VVYlJPR21tYklNS19yeVh2TF9ERDR3YWdOVFNSTGY3NTJJZV9hejlNZTZMSmEzS1cwWUxiUkpWeXFnT0U5SDgxQkVWbEdvNXZYd1ZJN3NuVkFwWlZVZkJnNldwb0gtTkRETDFGQThQSGE4VVlVRnlkZFJRaFlwTUt1eFYzU25TNUJDc3hlSWxoaHJXNS1rTWRpcmNTWmQ4N3ROejdLaExnZFowcWpwQUY3UEljZ1p1QnhoTmN0R3JZNDE5ZXhsS0YwOUs3cFFMSmpROU5Xc3VETHVEMlR6UkxxekxsMk5fekZrM01Idnc4eUxZbFJPNmpSUV9hdUgyRURadUtRcjZWUmNpZ2NqUk1OUjhkbFptajJabmxGR0M4eG9sU3Jfa1MxUGNCalRqV0t3X3lBVkx3R0w4ZzVyY2VWenNOSldhdGViZEtxX29kZUlUbFpWQWd1SERrM3c3dUJvdV9nTUZMcXo5MTBBUkEweXNyNHJsZEVLbkN1N1BTWmhqV1lwYlB5eGhaQlVRZU84OG90TDJsQ1hDUzE0WlNGaDE0WDRJeFZSVFJ1bUtKQ0hmT19HalV4WjdWRko0cWhFVW9iNVhMbTRpaER4Tms1M3ZmaDdleFNwTkNJd01ZY3AxX3R2X0dKcFlxaVJEc0dMNGpDYk96bVlEMndvVjV6M0g5ZE1QS245Wm5XTW1JZXJQNlY1emIxVXZEelJHeFllek4xbm54bUdoVHF2eUZGaE9kSENOTV9qYTRqZG9KU1EzQlhMbnlQTktqcHRIZmdqRGFSX0ZUSXRGQkVZbXRWb0M0VXlBVS1WbHplRlM1emZxU0h2MU4tRU9WZGRqMm41YWhLemwwQnBCQnA3SzU2M1hST0sxczdyME4xMVBoN3cwaTQzYTQ4SDR4M010WDg4RHBYOWs1Y01adzUxdFBSX1BXdDlGY2JFWkhJQl9zM0E9czk2LWMiLCJsb2NhbGUiOiJlbiIsInVwZGF0ZWRfYXQiOiIyMDIyLTAyLTA4VDIxOjIyOjM2LjIwOVoiLCJlbWFpbCI6Imtlbm55QGxhdGNoLmJpbyIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJpc3MiOiJodHRwczovL2xhdGNoYWkudXMuYXV0aDAuY29tLyIsInN1YiI6Imdvb2dsZS1vYXV0aDJ8MTA1MDg3OTM4NjkzMDUwODkxMDI0IiwiYXVkIjoianpGQk9oSWJmcDRFUFJZWjh3bXg0WXl2TDI3TEZEZUIiLCJpYXQiOjE2NDQ5NDgwNTcsImV4cCI6MTY0NDk4NDA1N30.qXQ1usYQKjHq7DTOSU73G5TdC1iYFTvcp5Qr3aeV-L5rj3Z8Fa_yA4-eqFCk4Qe5HYSAe6zGwPHlC4KhcqsPPtSTJP-vSHq3PkMC5hLKB9F6mhH2aQYSJExF622xxEkiQTvs4k-uU5WZgmF4aqPbB1wZYIopL7hTd57Nvg87YvoBq2LkPghEjp-UPaWlxsmELpuWz5cW0LC-1rRcJhuXJ5AE3pz0G5eVa6c64PWEGXPlgY3HXlfaebImWmi6T0JVcmMFI9Se_aQEmm3SV6eK07GlfAukRzcN4DGxJC_rMu5ZjW5qjMjCZiHZfmhTOVa1PZozEYigLRxpcdrTDVbBgw"
    token_dir = Path.home().joinpath(".latch")
    token_dir.mkdir(exist_ok=True)
    token_file = token_dir.joinpath("token")
    with open(token_file, "w") as f:
        f.write(tmp_token)

    return tmp_token


@pytest.fixture(scope="session")
def project_name():
    alphabet = string.ascii_letters
    return "".join(secrets.choice(alphabet) for i in range(8)).lower()
