import secrets
import string
from pathlib import Path

import pytest


@pytest.fixture(scope="session")
def test_account_jwt():

    # TODO: env variable
    tmp_token = "eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IlNMdVluMm1jTDN5UXByWjRRQ0pMdiJ9.eyJnaXZlbl9uYW1lIjoiS2VubnkiLCJmYW1pbHlfbmFtZSI6IldvcmttYW4iLCJuaWNrbmFtZSI6Imtlbm55IiwibmFtZSI6Iktlbm55IFdvcmttYW4iLCJwaWN0dXJlIjoiaHR0cHM6Ly9saDMuZ29vZ2xldXNlcmNvbnRlbnQuY29tL2EtL0FPaDE0R2hCOGNKR2Q1RklXUHVPWmUtYlN2QnZ2WDE5MkFFRC1GV3UwendocGdNOTl5RHEzcXF4LUZOMmJWS1VVYlJPR21tYklNS19yeVh2TF9ERDR3YWdOVFNSTGY3NTJJZV9hejlNZTZMSmEzS1cwWUxiUkpWeXFnT0U5SDgxQkVWbEdvNXZYd1ZJN3NuVkFwWlZVZkJnNldwb0gtTkRETDFGQThQSGE4VVlVRnlkZFJRaFlwTUt1eFYzU25TNUJDc3hlSWxoaHJXNS1rTWRpcmNTWmQ4N3ROejdLaExnZFowcWpwQUY3UEljZ1p1QnhoTmN0R3JZNDE5ZXhsS0YwOUs3cFFMSmpROU5Xc3VETHVEMlR6UkxxekxsMk5fekZrM01Idnc4eUxZbFJPNmpSUV9hdUgyRURadUtRcjZWUmNpZ2NqUk1OUjhkbFptajJabmxGR0M4eG9sU3Jfa1MxUGNCalRqV0t3X3lBVkx3R0w4ZzVyY2VWenNOSldhdGViZEtxX29kZUlUbFpWQWd1SERrM3c3dUJvdV9nTUZMcXo5MTBBUkEweXNyNHJsZEVLbkN1N1BTWmhqV1lwYlB5eGhaQlVRZU84OG90TDJsQ1hDUzE0WlNGaDE0WDRJeFZSVFJ1bUtKQ0hmT19HalV4WjdWRko0cWhFVW9iNVhMbTRpaER4Tms1M3ZmaDdleFNwTkNJd01ZY3AxX3R2X0dKcFlxaVJEc0dMNGpDYk96bVlEMndvVjV6M0g5ZE1QS245Wm5XTW1JZXJQNlY1emIxVXZEelJHeFllek4xbm54bUdoVHF2eUZGaE9kSENOTV9qYTRqZG9KU1EzQlhMbnlQTktqcHRIZmdqRGFSX0ZUSXRGQkVZbXRWb0M0VXlBVS1WbHplRlM1emZxU0h2MU4tRU9WZGRqMm41YWhLemwwQnBCQnA3SzU2M1hST0sxczdyME4xMVBoN3cwaTQzYTQ4SDR4M010WDg4RHBYOWs1Y01adzUxdFBSX1BXdDlGY2JFWkhJQl9zM0E9czk2LWMiLCJsb2NhbGUiOiJlbiIsInVwZGF0ZWRfYXQiOiIyMDIyLTAyLTA4VDIxOjIyOjM2LjIwOVoiLCJlbWFpbCI6Imtlbm55QGxhdGNoLmJpbyIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJpc3MiOiJodHRwczovL2xhdGNoYWkudXMuYXV0aDAuY29tLyIsInN1YiI6Imdvb2dsZS1vYXV0aDJ8MTA1MDg3OTM4NjkzMDUwODkxMDI0IiwiYXVkIjoianpGQk9oSWJmcDRFUFJZWjh3bXg0WXl2TDI3TEZEZUIiLCJpYXQiOjE2NDQ4MDMzMjcsImV4cCI6MTY0NDgzOTMyN30.dk-n78qNfvu7cPVRqtoVBsJ5NeSQY2AzYyYI8B9hCstBN48PH9g-0fmatuzAOs3d8mwkoAv32f9_d3Wcuh_NXdBP12Y1lACc2dMZBYBxU3JSEo_qE2nau9FqZiie6Z843oLi-0iY1uVhSKflPL0kOfFLK3IlJwO25je0Q_vkqFbgeHDhCeRnepirOs8dEYCMv98qVWjwSESIMmk2TNGZjB-8kY2ngjYckyPZlyNJtnPW34USYMVm3JN9UF4Yq3xUuKicG730rC8jMXCrTQZan4_fwLA8lKLghccYAAVls28r1rDh3ZM71FynnQXidlHs1id6yrN-QsoQ48bVbL5bCg"
    token_dir = Path.home().joinpath(".latch")
    token_dir.mkdir(exist_ok=True)
    token_file = token_dir.joinpath("token")
    with open(token_file, "w") as f:
        f.write(tmp_token)

    return tmp_token


@pytest.fixture(scope="session")
def project_name():
    alphabet = string.ascii_letters
    return "".join(secrets.choice(alphabet) for i in range(8)).lower()
